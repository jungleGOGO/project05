<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>신고하기</title>
    <th:block th:insert="~{layout/head :: head}"></th:block>
</head>
<body>
<div style="margin:20px;">
<div>

    <h4>게시글을 신고하는 이유를 선택해주세요.</h4>
</div>
    <input type="hidden" name="marketNo" id="marketNo" value="${marketNo}">
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="허위/거짓 정보를 포함하고 있어요." id="flexCheckDefault1" name="reason" onchange="checkChange('flexCheckDefault1')">
        <label class="form-check-label" for="flexCheckDefault1">
            허위/거짓 정보를 포함하고 있어요.
        </label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="선정적인 내용을 포함하고 있어요." id="flexCheckDefault2" name="reason" onchange="checkChange('flexCheckDefault2')">
        <label class="form-check-label" for="flexCheckDefault2">
            선정적인 내용을 포함하고 있어요.
        </label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="광고 내용과 연관없는 이미지를 사용하고 있어요." id="flexCheckDefault3" name="reason" onchange="checkChange('flexCheckDefault3')">
        <label class="form-check-label" for="flexCheckDefault3">
            광고 내용과 연관없는 이미지를 사용하고 있어요.
        </label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="의료법 위반으로 광고 수정이 필요해요." id="flexCheckDefault4" name="reason" onchange="checkChange('flexCheckDefault4')">
        <label class="form-check-label" for="flexCheckDefault4">
            의료법 위반으로 광고 수정이 필요해요.
        </label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="단통법 위반으로 광고 수정이 필요해요." id="flexCheckDefault5" name="reason" onchange="checkChange('flexCheckDefault5')">
        <label class="form-check-label" for="flexCheckDefault5">
            단통법 위반으로 광고 수정이 필요해요.
        </label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="욕설/비방/혐오 내용이 포함되어 있어요." id="flexCheckDefault6" name="reason" onchange="checkChange('flexCheckDefault6')">
        <label class="form-check-label" for="flexCheckDefault6">
            욕설/비방/혐오 내용이 포함되어 있어요.
        </label>
    </div>
    <div class="mb-3">
        <label for="reason" class="form-label">기타</label>
        <textarea id="reason" name="reason" class="form-control" placeholder="내용 입력" rows="8" cols="100" maxlength="300"></textarea>
    </div>
    <div style="margin-top: 30px;">
        <button class="button is-danger" onclick="submit()">게시글 신고</button>
    </div>
<script>
    function checkChange(checkboxId) {
        var checkboxes = document.querySelectorAll('.form-check-input');
        checkboxes.forEach(function(checkbox) {
            if (checkbox.id !== checkboxId) {
                checkbox.checked = false;
            }
        });
    }

    function submit() {
        var marketNo =
        var loginId =
        var reporter =
        var reason =

        $.ajax({
            type: "POST",
            url: `${/report/reportInsert}`,
            data: { marketNo:marketNo ,  loginId:sid, reason:reason, reporter:marketNo.getAuthor()   },
            success: function(data) {
                alert("신고되었습니다.");
                window.close();
                window.opener.location.reload();
            },
            error: function(error) {
                alert("신고중 오류가 발생했습니다.");
                window.close();
                console.log(error.responseText);
            }
        });
    }
</script>
</div>
</body>
</html>